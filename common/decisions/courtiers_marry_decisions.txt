courtiers_marry_decision = {
	picture = "gfx/interface/illustrations/decisions/decision_invite_knights.dds"
	desc = courtiers_marry_decision_desc
	
	confirm_text = courtiers_marry_decision_confirm

	is_shown = { 
		is_ai = no
		is_ruler = yes
        }
	is_valid ={
		any_courtier = {
			age >= 16
			is_married = no
			is_betrothed = no
			NOT = {
				is_close_or_extended_family_of = root
			}
			can_marry_trigger = yes
			root = {
				is_character_interaction_valid = {
					recipient = prev
					interaction = marry_off_interaction
				}
			}
		}
		
	}
	
	effect = {
		every_courtier = {
			limit = {
				age >= 16
				is_married = no
				is_betrothed = no
				NOT = {
					is_close_or_extended_family_of = root
				}
				can_marry_trigger = yes
				root = {
					is_character_interaction_valid = {
						recipient = prev
						interaction = marry_off_interaction
					}
				}
			}
			
			save_temporary_scope_as = template
		
			if = {
				limit = {
					exists = scope:every_courtier.location
				}
				random_pool_character = {
					province = scope:every_courtier.location
					limit = {
						allowed_to_marry_character_gender_trigger = { CHARACTER = scope:every_courtier }
						is_physically_able_adult = yes
						age <= 40
						is_married = no
						can_marry_trigger = yes
						is_concubine = no
						is_attracted_to_gender_of = scope:every_courtier
					}
					save_temporary_scope_as = spouse
				}
			}
			else = {
				create_character = {
					location = scope:template.location
					gender_female_chance = scope:template.marriage_gender_adjusted_female_chance
					template = pool_repopulate_spouse
					save_temporary_scope_as = spouse
				}
			}
			if = {
				limit = {
					is_male = yes
				}
				marry = scope:spouse
			}
			else = {
				marry_matrilineal = scope:spouse
			}
			scope:spouse = {
				if = {
					limit = {
						exists = scope:template.host
					}
					visit_court_of = scope:template.host
				}
			}
		}
	}
}